<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Fashion Wizard | Cart</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="eCommerce HTML Template Free Download" name="keywords">
    <meta content="eCommerce HTML Template Free Download" name="description">

    
    <link rel="shortcut icon" href="./../../MAIN/assets/images/logo.jpeg" type="image/svg+xml">

    
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400|Source+Code+Pro:700,900&display=swap"
        rel="stylesheet">

    
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="lib/slick/slick.css" rel="stylesheet">
    <link href="lib/slick/slick-theme.css" rel="stylesheet">

    
    <link href="./style.css" rel="stylesheet">
</head>

<body>

    
    <div class="bottom-bar">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-4">
                    <div class="search">
                        <input type="text" placeholder="Search">
                        <button><i class="fa fa-search"></i></button>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="logo">
                        <a href="../../MAIN/">
                            <img src="./img/WhatsApp Image 2024-05-05 at 13.25.57.jpeg" alt="">
                        </a>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="user">
                        <a href="wishlist.html" class="btn wishlist">
                            <i class="fa fa-heart"></i>
                            <span>(0)</span>
                        </a>
                        <a href="cart.html" class="btn cart">
                            <i class="fa fa-shopping-cart"></i>
                            <span>(4)</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    
    <div class="cart-page">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-8">
                    <div class="cart-page-inner">
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="thead-dark">
                                    <tr>
                                        <th>Product</th>
                                        <th>Price</th>
                                        <th>Quantity</th>
                                        <th>Total</th>
                                        <th>Remove</th>
                                    </tr>
                                </thead>
                                <tbody class="align-middle">
                                    <tr>
                                        <td>
                                            <div class="img">
                                                <a href="#"><img src="./img/product2.jpg" alt="Image"></a>
                                                <p>Cream Backpack</p>
                                            </div>
                                        </td>
                                        <td class="price">429000</td>
                                        <td>
                                            <div class="qty">
                                                <button class="btn-minus"><i class="fa fa-minus"></i></button>
                                                <input type="text" value="1">
                                                <button class="btn-plus"><i class="fa fa-plus"></i></button>
                                            </div>
                                        </td>
                                        <td class="total">429000</td>
                                        <td><button class="btn-remove"><i class="fa fa-trash"></i></button></td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="img">
                                                <a href="#"><img src="./img/product3.jpg" alt="Image"></a>
                                                <p>Regular Fit Shirt</p>
                                            </div>
                                        </td>
                                        <td class="price">239000</td>
                                        <td>
                                            <div class="qty">
                                                <button class="btn-minus"><i class="fa fa-minus"></i></button>
                                                <input type="text" value="1">
                                                <button class="btn-plus"><i class="fa fa-plus"></i></button>
                                            </div>
                                        </td>
                                        <td class="total">239000</td>
                                        <td><button class="btn-remove"><i class="fa fa-trash"></i></button></td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="img">
                                                <a href="#"><img src="./img/product8.jpg" alt="Image"></a>
                                                <p>Style Cap</p>
                                            </div>
                                        </td>
                                        <td class="price">129000</td>
                                        <td>
                                            <div class="qty">
                                                <button class="btn-minus"><i class="fa fa-minus"></i></button>
                                                <input type="text" value="1">
                                                <button class="btn-plus"><i class="fa fa-plus"></i></button>
                                            </div>
                                        </td>
                                        <td class="total">129000</td>
                                        <td><button class="btn-remove"><i class="fa fa-trash"></i></button></td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="img">
                                                <a href="#"><img src="./img/product9.jpg" alt="Image"></a>
                                                <p>Black Slimbag</p>
                                            </div>
                                        </td>
                                        <td class="price">329000</td>
                                        <td>
                                            <div class="qty">
                                                <button class="btn-minus"><i class="fa fa-minus"></i></button>
                                                <input type="text" value="1">
                                                <button class="btn-plus"><i class="fa fa-plus"></i></button>
                                            </div>
                                        </td>
                                        <td class="total">329000</td>
                                        <td><button class="btn-remove"><i class="fa fa-trash"></i></button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="cart-page-inner">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="coupon">
                                    <input type="text" placeholder="Coupon Code">
                                    <button>Apply Code</button>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="cart-summary">
                                    <div class="cart-content">
                                        <h1>Cart Summary</h1>
                                        <p>Sub Total<span id="sub-total">Rp. 1.460.000</span></p>
                                        <p>Shipping Cost<span>Rp. 25.000</span></p>
                                        <h2>Grand Total<span id="grand-total">Rp. 1.485.000</span></h2>
                                    </div>
                                    <div class="cart-btn">
                                        <button id="update-cart">Update Cart</button>
                                        <a href="checkout.html" class="btn">Checkout</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    
    <a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>

    
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/slick/slick.min.js"></script>

   
    <script src="./main.js"></script>

    <script>
        function formatRupiah(amount) {
            return 'Rp. ' + amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }

        function updateCartTotal() {
            let subTotal = 0;
            const rows = document.querySelectorAll('.cart-page-inner tbody tr');
            rows.forEach(row => {
                const price = parseInt(row.querySelector('.price').textContent.replace(/\D/g, ''));
                const quantity = parseInt(row.querySelector('.qty input').value);
                const total = price * quantity;
                row.querySelector('.total').textContent = formatRupiah(total);
                row.querySelector('.price').textContent = formatRupiah(price);
                subTotal += total;
            });
            document.getElementById('sub-total').textContent = formatRupiah(subTotal);
            document.getElementById('grand-total').textContent = formatRupiah(subTotal + 25000);
        }

        document.addEventListener('DOMContentLoaded', function () {
            const removeButtons = document.querySelectorAll('.btn-remove');
            removeButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const row = button.closest('tr');
                    row.remove();
                    updateCartTotal();
                });
            });

            const minusButtons = document.querySelectorAll('.btn-minus');
            minusButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const input = button.nextElementSibling;
                    let value = parseInt(input.value);
                    if (value > 1) {
                        value--;
                        input.value = value;
                        updateCartTotal();
                    }
                });
            });

            const plusButtons = document.querySelectorAll('.btn-plus');
            plusButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const input = button.previousElementSibling;
                    let value = parseInt(input.value);
                    value++;
                    input.value = value;
                    updateCartTotal();
                });
            });

            document.getElementById('update-cart').addEventListener('click', function () {
                updateCartTotal();
            });

            updateCartTotal();
            
            function formatRupiah(angka, prefix = 'Rp.') {
                var number_string = angka.toString().replace(/[^,\d]/g, ''),
                    split = number_string.split(','),
                    sisa = split[0].length % 3,
                    rupiah = split[0].substr(0, sisa),
                    ribuan = split[0].substr(sisa).match(/\d{3}/gi);
        
                if (ribuan) {
                    separator = sisa ? '.' : '';
                    rupiah += separator + ribuan.join('.');
                }
        
                rupiah = split[1] !== undefined ? rupiah + ',' + split[1] : rupiah;
                return prefix === undefined ? rupiah : (rupiah ? 'Rp. ' + rupiah : '');
            }
        
            document.addEventListener('DOMContentLoaded', function () {
                // Ambil nilai subtotal dari elemen halaman keranjang
                const cartSubTotalElement = document.querySelector('.sub-total span');
                const cartSubTotal = parseInt(cartSubTotalElement.textContent.replace(/[^0-9]/g, ''), 10);
        
                // Simpan subtotal di localStorage
                localStorage.setItem('cartSubTotal', cartSubTotal);
            });
        });
    </script>
</body>

</html>